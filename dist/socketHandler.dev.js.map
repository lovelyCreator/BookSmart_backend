{"version":3,"sources":["socketHandler.js"],"names":["http","require","Server","httpServer","createServer","io","db","Chat","chats","on","socket","console","log","message","newMessage","userName","username","timestamp","Date","save","emit","PORT","listen"],"mappings":";;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;eACmBA,OAAO,CAAC,WAAD,C;IAAlBC,M,YAAAA,M;;AAER,IAAMC,UAAU,GAAGH,IAAI,CAACI,YAAL,EAAnB;AACA,IAAMC,EAAE,GAAG,IAAIH,MAAJ,CAAWC,UAAX,CAAX;;AAEA,IAAMG,EAAE,GAAGL,OAAO,CAAC,cAAD,CAAlB;;AACA,IAAMM,IAAI,GAAGD,EAAE,CAACE,KAAhB;AAEAH,EAAE,CAACI,EAAH,CAAM,YAAN,EAAoB,UAACC,MAAD,EAAY;AAC9BC,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AAEAF,EAAAA,MAAM,CAACD,EAAP,CAAU,SAAV,EAAqB,UAACI,OAAD,EAAa;AAChCF,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BC,OAA5B;AACA,QAAMC,UAAU,GAAG,IAAIP,IAAJ,CAAS;AAC1BQ,MAAAA,QAAQ,EAAEF,OAAO,CAACG,QADQ;AAE1BH,MAAAA,OAAO,EAAEA,OAAO,CAACA,OAFS;AAG1BI,MAAAA,SAAS,EAAE,IAAIC,IAAJ,EAHe,CAGJ;;AAHI,KAAT,CAAnB;AAKAJ,IAAAA,UAAU,CAACK,IAAX;AACAd,IAAAA,EAAE,CAACe,IAAH,CAAQ,SAAR,EAAmBP,OAAnB;AACD,GATD;AAWAH,EAAAA,MAAM,CAACD,EAAP,CAAU,YAAV,EAAwB,YAAM;AAC5BE,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACD,GAFD;AAGD,CAjBD;AAmBA,IAAMS,IAAI,GAAG,IAAb;AACAlB,UAAU,CAACmB,MAAX,CAAkBD,IAAlB,EAAwB,YAAM;AAC5BV,EAAAA,OAAO,CAACC,GAAR,+CAAmDS,IAAnD;AACD,CAFD","sourcesContent":["const http = require('http');\r\nconst { Server } = require(\"socket.io\");\r\n\r\nconst httpServer = http.createServer();\r\nconst io = new Server(httpServer);\r\n\r\nconst db = require(\"./app/models\");\r\nconst Chat = db.chats\r\n\r\nio.on('connection', (socket) => {\r\n  console.log('New client connected');\r\n\r\n  socket.on('message', (message) => {\r\n    console.log('New message:', message);\r\n    const newMessage = new Chat({\r\n      userName: message.username,\r\n      message: message.message,\r\n      timestamp: new Date() // Save the current server time to the database\r\n    });\r\n    newMessage.save();\r\n    io.emit('message', message);\r\n  });\r\n\r\n  socket.on('disconnect', () => {\r\n    console.log('Client disconnected');\r\n  });\r\n});\r\n\r\nconst PORT = 3001;\r\nhttpServer.listen(PORT, () => {\r\n  console.log(`Socket.IO server is running on port ${PORT}`);\r\n});"],"file":"socketHandler.dev.js"}
{"version":3,"sources":["socketHandler.js"],"names":["http","require","Server","httpServer","createServer","io","db","chats","on","socket","console","message","log","Chat","username","timestamp","newMessage","Date","PORT","listen","concat"],"mappings":"aAAA,IAAMA,KAAOC,QAAQ,iBACFA,QAAQ,aAAnBC,gBAAAA,OAEFC,WAAaH,KAAKI,eAClBC,GAAK,IAHQJ,OAAOE,YAKpBG,GAAKL,QAAQ,gBAHbE,KAAAA,GAAUI,MAMhBF,GAAGG,GAAG,aAAc,SAACC,GAHrBC,QAAWT,IAAAA,wBACXQ,EAAUD,GAAGF,UAAb,SAAAK,GAEGH,QAAGI,IAAA,eAAeH,GACP,IAAAI,KAAA,CAEZJ,SAAUE,EAAWG,SACnBJ,QAAAC,EAAYA,QACZI,UAAMC,IAAaC,OAERN,OACTI,GAAAA,KAAAA,UAAeE,KAEjBD,EAAAA,GAAAA,aAAA,WACAX,QAAQO,IAAA,2BAKT,IAFDM,KAAA,KAGDf,WAjBDgB,OAAAD,KAAA,WAmBAR,QAAUE,IAAV,uCAAAQ,OAAAF","file":"socketHandler.min.js","sourcesContent":["const http = require('http');\r\nconst { Server } = require(\"socket.io\");\r\n\r\nconst httpServer = http.createServer();\r\nconst io = new Server(httpServer);\r\n\r\nconst db = require(\"./app/models\");\r\nconst Chat = db.chats\r\n\r\nio.on('connection', (socket) => {\r\n  console.log('New client connected');\r\n\r\n  socket.on('message', (message) => {\r\n    console.log('New message:', message);\r\n    const newMessage = new Chat({\r\n      userName: message.username,\r\n      message: message.message,\r\n      timestamp: new Date() // Save the current server time to the database\r\n    });\r\n    newMessage.save();\r\n    io.emit('message', message);\r\n  });\r\n\r\n  socket.on('disconnect', () => {\r\n    console.log('Client disconnected');\r\n  });\r\n});\r\n\r\nconst PORT = 3001;\r\nhttpServer.listen(PORT, () => {\r\n  console.log(`Socket.IO server is running on port ${PORT}`);\r\n});"]}